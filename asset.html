<!DOCTYPE html>
<html>
<head>
	
	<meta property="og:title" content="STAMPchain.io" />
<meta property="og:description" content="Unprunable Bitcoin Art, Because Sats Don’t Exist." />
<meta property="og:image" content="https://i.imgur.com/ZvtY5Te.jpg" />
<meta name="title" content="STAMPchain.io"/>
<meta name="description" content="Unprunable Bitcoin Art, Because Sats Don’t Exist." />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
	
<meta charset="UTF-8">
	
	
	
	
	
    <title>STAMPchain.io - Asset Details</title>
    <style>
	    
	#menu {position:absolute;right:0px;top:0px;color:white;text-transform:none;font-size:12px;background-image: url("https://i.imgur.com/8hNkWAl.png");
      background-size: 3px;padding:6px 12px;}

#menu a {color:white;text-decoration:none;}

#menu a:hover {text-decoration:underline;color:yellow;}    
	    
	    
	    
	    

     body {
  background-color:black;color:white;
}

h1 {margin-top:40px;color:#111111;font-family:helvetica,arial;text-shadow: -1px -1px 0 yellow, 1px -1px 0 yellow, -1px 1px 0 yellow, 1px 1px 0 yellow;text-align:center;margin-bottom:0px;}

h2 {color:white;text-align:center;font-family:serif;text-transform: none;font-size:18px;}

h3 {font-family:monospace;padding-top:10px;font-size:14px;color:#666666;}

pre {font-family:monospace;color:#666666;}

#asset-container {width:100%;}

#asset-container img {border-radius: 12px;
      overflow:hidden;
			image-rendering: pixelated;
			image-rendering: -moz-crisp-edges;
			image-rendering: crisp-edges;
      background-image: url("https://i.imgur.com/8hNkWAl.png");
      background-size: 3px;}

#asset-container pre {font-size:10px;}

pre a {color:white;}

h1 a {text-decoration:none;color:black;text-transform: uppercase;}
        
    </style>
</head>
<body>
	
	  <div id="menu">
    <a href="https://github.com/mikeinspace/stamps" target="_blank">About</a> | <a href="https://stampchain.io/minting.html">Minting</a> | <a href="https://t.me/BitcoinStamps" target="_blank">Join us!</a>
  </div>
	
	
	
	
	
	
  <h1><a href="https://stampchain.io/">STAMPchain.io</a></h1>
    
    
      <h2><em>Unprunable Bitcoin Art, Because Sats Don’t Exist.</em></h2>
    
        <h3 style="text-align:center;">Asset Details</h3>
    
    
    <div id="asset-container" style="text-align:center;"></div>
    <script>
    
        async function fetchAssetDetails() {
            const urlParams = new URLSearchParams(window.location.search);
            const stampNumber = urlParams.get('stampNumber');

            try {
                const assetResponse = await fetch('https://stampchain.io/stamp.json');
                const allAssetData = await assetResponse.json();
                const assetData = allAssetData.find(asset => asset.stamp === parseInt(stampNumber));

                if (assetData) {
                    displayAssetDetails(assetData);

                    const proxyUrl = 'https://k6e0ufzq8h.execute-api.us-east-1.amazonaws.com/beta/counterpartyproxy';

                    const requestOptions = {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json; charset=UTF-8',
                            'Accept': 'application/json, text/javascript',
                            'Authorization': 'Basic ' + btoa('rpc:rpc'),
                        },
                        body: JSON.stringify({
                            rpcUser: 'rpc',
                            rpcPassword: 'rpc',
                            request: {
                                jsonrpc: '2.0',
                                id: 0,
                                method: 'get_asset_info',
                                params: {
                                    assets: [assetData.asset],
                                },
                            },
                        }),
                    };

                    const counterpartyResponse = await fetch(proxyUrl, requestOptions);
                    const counterpartyData = await counterpartyResponse.json();

                    if (counterpartyData.result && counterpartyData.result.length > 0) {
                        const counterpartyassetData = counterpartyData.result[0];
                        displayCounterpartyAssetDetails(counterpartyassetData, assetData.tx_hash, assetData.stamp_url);
                    } else {
                        console.error('Asset not found on Counterparty');
                    }

                } else {
                    console.error('Asset not found');
                }
            } catch (error) {
                console.error(error);
            }
        }



        function displayAssetDetails(data) {
            const assetContainer = document.getElementById('asset-container');

            // Display asset image
            const img = document.createElement('img');
            img.src = data.stamp_url;
            img.width = 420;
            img.height = 420;
            img.style.objectFit = 'contain';
            img.style.imageRendering = 'pixelated';
            img.style.imageRendering = '-moz-crisp-edges';
            img.style.imageRendering = 'crisp-edges';
            img.style.backgroundColor = '#000000';
            assetContainer.appendChild(img);

            // Display asset details
            const assetDetails = document.createElement('div');
            assetDetails.style.textAlign = 'center';

            const stampDetail = document.createElement('pre');
            stampDetail.innerText = `Stamp: ${data.stamp}`;
            assetDetails.appendChild(stampDetail);

            const txIndexDetail = document.createElement('pre');
            txIndexDetail.innerText = `Tx Index: ${data.tx_index}`;
            assetDetails.appendChild(txIndexDetail);

            const assetDetail = document.createElement('pre');
            assetDetail.innerText = `Asset: ${data.asset}`;
            assetDetails.appendChild(assetDetail);

            const txHashDetail = document.createElement('pre');
            txHashDetail.innerText = `Tx Hash: ${data.tx_hash}`;
            assetDetails.appendChild(txHashDetail);

            assetContainer.appendChild(assetDetails);
        }

        function displayCounterpartyAssetDetails(assetData, txHash, stamp_url) {
            const assetContainer = document.getElementById('asset-container');

            const assetDetailsContainer = document.createElement('div');
            assetDetailsContainer.style.textAlign = 'center';

            // const assetDetailsTitle = document.createElement('h3');
            // assetDetailsTitle.innerText = 'Asset Details';
            // assetDetailsContainer.appendChild(assetDetailsTitle);

            const assetDetails = document.createElement('pre');
            assetDetails.innerText = `Issuer: ${assetData.issuer}\nTotal Issued: ${assetData.supply}\nDivisible: ${assetData.divisible}\nLocked: ${assetData.locked}`;
            assetDetailsContainer.appendChild(assetDetails);

            const mediaLink = document.createElement('pre');
            const mediaLinkAnchor = document.createElement('a');
            mediaLinkAnchor.href = `${stamp_url}`;
            mediaLinkAnchor.innerText = 'Binary Media';

            mediaLink.appendChild(mediaLinkAnchor);
            assetDetailsContainer.appendChild(mediaLink);

            const txnDataLink = document.createElement('pre');
            const txnDataLinkAnchor = document.createElement('a');
            txnDataLinkAnchor.href = `https://jpja.github.io/Electrum-Counterparty/decode_tx.html?tx=${txHash}`;
            txnDataLinkAnchor.innerText = 'Txn Data Decoder';
            txnDataLink.appendChild(txnDataLinkAnchor);
            assetDetailsContainer.appendChild(txnDataLink);

            const xchainExplorerLink = document.createElement('pre');
            const xchainExplorerLinkAnchor = document.createElement('a');
            xchainExplorerLinkAnchor.href = `https://xchain.io/asset/${assetData.asset}`;
            xchainExplorerLinkAnchor.innerText = 'Xchain.io Asset Information';
            xchainExplorerLink.appendChild(xchainExplorerLinkAnchor);
            assetDetailsContainer.appendChild(xchainExplorerLink);

            assetContainer.appendChild(assetDetailsContainer);
        }


        function displayDispenserDetails(dispenserData) {
            if (dispenserData.length > 0) {
                const assetContainer = document.getElementById('asset-container');
                const dispenserDetails = document.createElement('pre');
                dispenserDetails.innerText = 'Dispensers:\n';
                dispenserData.forEach((dispenser, index) => {
                    dispenserDetails.innerText += `\nDispenser ${index + 1}:\nAsset: ${dispenser.asset}\nAmount: ${dispenser.amount}\nDispenser Address: ${dispenser.dispenser}\n`;
                });
                assetContainer.appendChild(dispenserDetails);
            }
        }

        fetchAssetDetails();
    </script>
	

    
    <p style="color:white;text-align:center;text-transform:none;font-family:monospace;margin-top:50px;">&copy 2023 STAMPS Protocol</p>
    
</body>
</html>
