# SRC-721 Token Standard

`SRC-721` is a new Non-fungible Token Protocol on Bitcoin Stamps. It's backward compatible with SRC-20 and arming to give Non-fungible tokens more possibilities and scalability.

# Specifications
SRC-721 Tokens must conform to these **required** fields (without **optional** label) or a Bitcoin Stamp Number will not be created, the transaction will not be considered a valid SRC-721 transaction, and they will not appear in the Bitcoin Stamps Protocol index / API. 

SRC-721 transaction must be signed and broadcast onto BTC by the address that holds the SRC-721 token balance as it acts as a means to authenticate ownership. Both the source and destination addresses are embedded into the BTC transaction which is created by the users wallet. The SRC-721 reference wallet will ensure you are creating the proper transaction until support can be integrated into more broadly distributed wallets such as Hiro. Please use extreme caution if signing transactions created by a third party.

### DEPLOY
```JSON
{
    "p": "src-721", //(string)protocol standard for non-fungible token
    "op": "deploy", //(string)function name
    "tick": "Stamp Is Cool",  //(string)collection name, must be 1-32 characters
    "max": "10000", //(uint64)maximum number of mints, if null means unlimited.
    "lim": "5", //(uint64)limit per mint, if null means unlimited.
    "dec": "0", //(uint64)current must be 0, src-20 compatible, maybe support divisible NFT to FT in the future
    "owner": "bc1q34eaj4rz9yxupzxwza2epvt3qv2nvcc0ujqqpl", //(string)token owner address who can invoke operation methods, support any type of bitcoin addresses
    "rec": "bc1q7rwd4cgdvcmrxm27xfy6504jwkllge3dda04ww", //(string)recipient address to receive mint fees, support any type of bitcoin addresses
    "sym": "SIC", //(string)symbol, must be 1-8 characters in length
    "pri": "10000", //(uint64)price in sats, must pay to owner
    "description": "The first src-721. We love btc stamp.", //(string)description for the collection.[optional, default=""]
    "wlf": true, //(bool)whitelist flag.[optional, default=false]
    "wll": "https://xxxxx", //(string)whitelist link, must be in format of csv, with two params in each line:(string)bitcoin address and (unit64)limit for whitelist mint with discount. This works only when "wlf" is true.[optional, default=""]
    "disc": "20", //(uint8)discount percentage, must be 1-100, 100 means free mint, 0 means original price. This works only when "wlf" is true.[optional, default="0"]
    "slf": false, //(bool)source link flag, when it's false, it stores images and attributes on BTC network. When it's false, it stores these by metadata link outside of BTC network.[optional, default=false]
}
```
`wll` example: [whitelist.csv](./whitelist.csv)

### MINT
```JSON
{
    "p": "src-721", //(string)protocol standard for non-fungible token
    "op": "mint", //(string)function name
    "hash": "0x38091b803f794e50dcc10a9091becaf4f65d35d3ef9e71cfa90c7936af50757e", //(hash256)txid of the deploy transaction
    "amt": "2" // (uint64)mint amount per transaction, can't be more than "lim" of "deploy". The generated tokenid will follow "the first come the first served" rule: the earlier be persisted on BTC network, the smaller tokenid will be generated. For example, if "max" of "deploy" is 100 and the latest NFT's tokenid is "90", this mint will generate 2 NFT with tokenid "91" and "92". If "max" of "deploy" is "100" and the latest NFT's tokenid is "99", this mint will only generate 1 NFT with tokenid "100"
}
```

### TRANSFER
```JSON
{
    "p": "src-721", //(string)protocol standard for non-fungible token
    "op": "transfer", //(string)function name
    "hash": "0x38091b803f794e50dcc10a9091becaf4f65d35d3ef9e71cfa90c7936af50757e", //(hash256)txid of the deploy transaction
    "tokenid": "101" //(uint64)tokenid of this nft
}
```

If the NFT specified to be transferred not in transaction sender's address (which would be determined by the latest state of an Indexer), then the transfer  will be deemed invalid.

### SETPROPERTY
```JSON
{
    "p": "src-721", //(string)protocol standard for non-fungible token
    "op": "setproperty", //(string)function name, this function only works when "slf" of "deploy" is false
    "hash": "0x38091b803f794e50dcc10a9091becaf4f65d35d3ef9e71cfa90c7936af50757e", //(hash256)txid of the deploy transaction
    "startid": "10", //(uint64)the tokenid to start for setting property 
    "endid": "50", //(uint64)the tokenid to end for setting property. If "startid" is the same as "endid", it means that's a single tokenid
    "attribute":{
    "author": "superboy",
    "category": "art",
    "description": "The first src-721. We love btc stamp.",
    ...
    },//This only works when "slf" is false. One string key with one string value. If "slf" is true, it should be set in "metadata" method and this content will not be processed
}
```
**Note**: Don't forget to set a stamp imagine in this transaction!

### SETMETADATA
```JSON
{
    "p": "src-721", //(string)protocol standard for non-fungible token
    "op": "setproperty", //(string)function name, this function only works when "slf" of "deploy" is true
    "hash": "0x38091b803f794e50dcc10a9091becaf4f65d35d3ef9e71cfa90c7936af50757e", //(hash256)txid of the deploy transaction
    "uri": "https://xxxxxx" //(string)metadata folder uri. Must prepare json format files in this path with the same name as tokenid. For example, A collection with 100 NFTs should have metadata like: 1.json, 2.json...100.json
}
```
`metadata` example: [metadata](./metadata/)

### TRANSFEROWNERSHIP
```JSON
{
    "p": "src-721", //(string)protocol standard for non-fungible token
    "op": "setproperty", //(string)function name, this function only works when "slf" of "deploy" is true
    "hash": "0x38091b803f794e50dcc10a9091becaf4f65d35d3ef9e71cfa90c7936af50757e", //(hash256)txid of the deploy transaction
    "newowner": "bc1qag3cemd7988sgtx2huscdf6qmvgexnsx393ayc" //(string)new owner address.Support any existed type of bitcoin addresses
}
```
This allows src-721 admin transfer ownership to another. Only owner address can invoke "MINT", "SETPROPERTY", "SETMETADATA" and "TRANSFEROWNERSHIP".
